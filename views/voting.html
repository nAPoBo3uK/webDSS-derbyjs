<import: src="./participants">

<index:>
    <div class="container-fluid">

        <a class="btn btn-lg btn-success" href="/voting?action=new">Новое</a>
        <view name="{{if _page.voting}}voting{{else}}new{{/}}"></view>
        <view name="participants"></view>
    </div>
    <list:>
        <div class="col-xs-3">

            <table class="table table-hover">
                <thead>
                <tr>
                    <th>Название</th>
                    <th>Создан</th>
                    <th>Роль</th>
                    <th></th>
                </tr>
                </thead>
                {{if _page.votings}}

                <tbody>
                {{each _page.votings as #voting}}
                <tr>
                    <td>{{#voting.name}}</td>
                    <td>{{toLocaleString(#voting.timeCreated)}}</td>
                    <td>{{#voting.role}}</td>
                    <td>
                        <button type="button" class="btn btn-default btn-xs" on-click="model.del('votings.' + #voting.id)">
                            <b>X</b>
                        </button>
                    </td>
                </tr>
                {{/each}}
                </tbody>
                {{/}}
            </table>
        </div>
    <new:>
        <div class="col-xs-6">
            <form role="form" on-submit="addVoting(_page.voting)">
                <h3>Новое голосование</h3>
                <div class="form-group">
                    <input name="name" type="text" class="form-control" placeholder="Название" value="{{_page.voting.name}}" required autofocus>
                </div>
                <div class="form-group">
                    <textarea class="form-control" placeholder="Описание"  rows="3">{{_page.voting.description}}</textarea>
                </div>
                <h4>Кандидаты</h4>

                    <input type="text" placeholder="Имя кандидата">

                <div class="form-group">
                    <button class="btn btn-primary btn-lg" type="submit">Создать</button>
                    <a class="btn btn-lg btn-default" href="/voting">Отмена</a>
                </div>
            </form>

        </div>

   <voting:>
        <div class="container">
            <h1>{{_page.voting}}</h1>
        </div>