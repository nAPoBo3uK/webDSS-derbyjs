<import: src="./list">
<import: src="./table">
<view:>
    {{with @model.selected}}
        <blockquote>
            <h2>{{this.name}}</h2>
            {{if @model.selected.participants.voters && isOwner(@model.selected)}}
                <button class="btn btn-info btn-lg" on-click="startVoting(@model.selected.id)">
                    <span class="glyphicon glyphicon-play"/>Старт!
                </button>
            {{/}}
        </blockquote>

        <dl class="dl-horizontal">
            <dt>Создано:</dt>
            <dd>{{formatDate(this.timeCreated)}}</dd>
            <dt>Менеджер:</dt>
            <dd>{{this.owner}}</dd>
        </dl>
        <p>{{this.description}}</p>
        <hr>
    {{/}}
    <candidats table = {{@model.selected.candidats}} editable></candidats>

<new:>
    <form role="form">
        <h3>Новое голосование</h3>
        {{with @model.new}}
            <div class="form-group">
                <input name="name" type="text" class="form-control" placeholder="Название" value="{{this.name}}" required autofocus>
            </div>
            <div class="form-group">
                <textarea class="form-control" placeholder="Описание"  rows="3">{{this.description}}</textarea>
            </div>
        <candidats table = {{_state.votings.new.candidats}} editable></candidats>
        {{/}}

        <mode-controls></mode-controls>
    </form>


<candidats:>
    <h4>
        Кандидаты
        {{if @editable}}
        <button type="button" class="btn btn-default" on-click="setEditMode()">
            <span class="glyphicon glyphicon-pencil"></span>
        </button>
        {{/}}
    </h4>
    <p>
        <view name="table:{{getMode()}}"></view>
    </p>


