
<list:>
    {{@content}}
    <div class="scrollable">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Название</th>
                    <th>Создан</th>
                    <th>Статус</th>
                    <th></th>
                </tr>
            </thead>
            {{if _page.votingsList}}
                <list-row-group name="Все" data="{{_page.votingsList}}"></list-row-group>
               <!-- <list-row-group name="Эксперт" data="{{_page.votings.expert}}"></list-row-group>
                <list-row-group name="Наблюдатель" data="{{_page.votings.observer}}"></list-row-group> -->
             {{/}}
        </table>
    </div>

<new:>
    <form role="form" on-submit="addVoting(_page.newVoting)">
        <h3>Новое голосование</h3>
        {{with _page.newVoting}}
            <div class="form-group">
                <input name="name" type="text" class="form-control" placeholder="Название" value="{{this.name}}" required autofocus>
            </div>
            <div class="form-group">
                <textarea class="form-control" placeholder="Описание"  rows="3">{{this.description}}</textarea>
            </div>
        {{/}}
            <candidats table = {{_page.newVoting.candidats}}></candidats>
        <mode-controls></mode-controls>
    </form>

<view:>
    <div class="container">
        {{with _page.selected}}
        <blockquote>
        <h1>{{this.name}}</h1>
            </blockquote>
        <p>{{this.description}}</p>
        <dl class="dl-horizontal">
            <dt>Создано:</dt>
            <dd>{{formatDate(this.timeCreated)}}</dd>
            <dt>Менеджер:</dt>
            <dd>{{this.owner}}</dd>
        </dl>
        <candidats table = {{_page.selected.candidats}}></candidats>
        {{/}}
    </div>



<list-row: element="list-row">
    <tr on-click="view(@index)">
        <td>{{@data.name}}</td>
        <td>{{formatDate(@data.timeCreated)}}</td>
        <td>{{@data.status}}</td>
        <td>
            <button type="button" class="btn btn-default btn-xs" on-click="delVoting(@data.id)">
                <b>X</b>
            </button>
        </td>
    </tr>


    <candidats: element="candidats">
        <h4>Кандидаты</h4>
        <p>
            {{if table}}
                <table class="table table-bordered">
                    {{each table as #row, #r}}
                        <tr>
                            {{each #row as #cell, #c}}
                                {{if #r===0}}
                                    <th>
                                        {{if #c===0}}
                                            <button type="button" class="btn btn-success" on-click="addRow()">
                                                <b>+</b>
                                                кандидат
                                            </button>
                                        {{else}}
                                            <span>CRITERIA {{#c}}</span>
                                            <button type="button" class="btn btn-danger" on-click="delCol(#c)">
                                                x
                                            </button>

                                        {{/}}
                                    </th>
                                {{else}}
                                    {{if #c===0}}
                                        <th>
                                            <button type="button" class="btn btn-danger" on-click="delRow(#r)">х</button>
                                            <span>Candidat {{#r}}</span>
                                        </th>
                                    {{else}}
                                        <td on-click="editCell(#cell, #r, #c)">
                                            <form on-submit="doneEditing(edit)">
                                                {{if edit.row===#r}}
                                                    {{if edit.col===#c}}
                                                        <input id="cell{{#r}}{{c}}" class="edit" value="{{edit.text}}" x-bind="blur:doneEditing" on-keyup="cancelEditing($event)">
                                                    {{else}}
                                                        {{#cell}}
                                                    {{/}}
                                                {{else}}
                                                    {{#cell}}
                                                {{/}}
                                            </form>
                                        </td>
                                    {{/}}
                                {{/}}
                            {{/}}
                        </tr>
                    {{/}}
                </table>
            {{/}}
        <button type="button" class="btn btn-warning" on-click="addCol()">Критерий</button>
        </p>