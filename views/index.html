<import: src="./votings">
<import: src="./login">
<import: src="./users">
<import: src="./registration">
<import: src="./navigation">
<import: src="./account">
<import: src="./participants">
<import: src="./table">
<import: src="./list">

<Title:>
    webDSS
<Head:>
    {{if _session.flash.error}}
        <div class="container">
            {{each _session.flash.error as #error}}
                <div class="alert alert-warning">{{#error}}</div>
            {{/}}
        </div>
    {{/}}

<Body:>
    <view name="navigation"></view>
    <div class="container-fluid">
        <div class="col-xs-3">
            <list data="{{_page.list}}"
                  owner="{{_session.userId}}"
                  pattern="{{$render.ns}}"
                  on-view="view()"
                  on-delete="delListItem()"
                  on-set-participant="participants.add()"/>
        </div>
        <div class="col-xs-6">
             {{if _state[$render.ns].mode}}
                <view name="{{$render.ns}}:{{_state[$render.ns].mode}}" model="{{_state[$render.ns]}}"></view>
            {{/}}
        </div>
        <div class="col-xs-3">
            {{if _state.votings.selected}}
                <participants model="{{_state.votings.selected}}"></participants>
            {{/}}
        </div>
    </div>

<mode-controls: element="mode-controls">
    <div class="form-group">
        <button type="button" class="btn btn-primary btn-lg" on-click="addNew($render.ns)">Сохранить</button>
        <a role="button" class="btn btn-lg btn-default" on-click="freeNew($render.ns)">Отмена</a>
    </div>


